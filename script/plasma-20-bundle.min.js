!function(){"use strict";class e{static get fragmentShaderResourceType(){return 0}static get vertexShaderResourceType(){return 1}static get shaderProgramResourceType(){return 2}static get float32ArrayResourceType(){return 3}static get rgbaTextureResourceType(){return 4}static get f32TextureResourceType(){return 5}constructor(e){if(this.canvas=e,this.canvas.width=e.clientWidth,this.canvas.height=e.clientHeight,this.gl=e.getContext("webgl2"),null===this.gl)throw"Failed to load WebGL";this.gl.clearColor(0,0,0,1),this.gl.clearDepth(1),/^i(Pad|Phone|Pod)/.test(window.navigator?.platform)||/MacIntel/.test(window.navigator?.platform)&&void 0!==window.navigator.standalone||!this.gl.getExtension("EXT_color_buffer_float")?this.gl.getExtension("EXT_color_buffer_half_float")?(this.singleChannelFloatFormat=this.gl.R16F,this.floatType=this.gl.HALF_FLOAT):(this.singleChannelFloatFormat=null,this.floatType=null):(this.singleChannelFloatFormat=this.gl.R32F,this.floatType=this.gl.FLOAT),this.resizeHandler=null,this.resizeObserver=new ResizeObserver((t=>{for(let n of t){const t=n.target,i=t.getContext("webgl2");t.width=t.clientWidth,t.height=t.clientHeight,i.viewport(0,0,e.clientWidth,e.clientHeight),this.resizeHandler&&this.resizeHandler(t)}}))}attachResizeHandler(e){this.resizeHandler=e,this.resizeObserver.observe(this.canvas)}detachResizeHandler(){this.resizeHandler=null,this.resizeObserver.disconnect()}clear(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}drawToTexture(e,t,n,i){if(5===e&&(null===this.singleChannelFloatFormat||null===this.floatType))return null;let r=!1;const s=this.getTextureResource(e,null,t,n),o=this.gl.createFramebuffer();try{return this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,o),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,s.resource,0),this.gl.viewport(0,0,t,n),this.gl.FRAMEBUFFER_COMPLETE!==this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER)?(this.destroyResources(s),null):(i(this),r=!0,s)}finally{r||this.destroyResources(s),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.deleteFramebuffer(o)}}drawTriangleStrip(e,t){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,e,t)}setActiveShaderProgram(e){console.assert(2===e.resourceType),this.activeShaderProgram=e,this.gl.useProgram(e.resource)}setActiveTexture(e,t){this.gl.activeTexture(this.gl.TEXTURE0+e),this.gl.bindTexture(this.gl.TEXTURE_2D,t.resource)}assignVertexAttribute(e,t,n,i=!1,r=0,s=0){console.assert(3===t.resourceType),this.activeShaderProgram.attributeLocations.hasOwnProperty(e)||(this.activeShaderProgram.attributeLocations[e]=this.gl.getAttribLocation(this.activeShaderProgram.resource,e));const o=this.activeShaderProgram.attributeLocations[e];this.gl.enableVertexAttribArray(o),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.resource),this.gl.vertexAttribPointer(o,n,this.gl.FLOAT,i,r,s)}assignIntUniformAttribute(e,...t){console.assert(t.length>0&&t.length<5);const n=this._getLocationForUniform(this.activeShaderProgram,e);[void 0,this.gl.uniform1i,this.gl.uniform2i,this.gl.uniform3i,this.gl.uniform4i][t.length].call(this.gl,n,...t)}assignFloatUniformAttribute(e,...t){console.assert(t.length>0&&t.length<5);const n=this._getLocationForUniform(this.activeShaderProgram,e);[void 0,this.gl.uniform1f,this.gl.uniform2f,this.gl.uniform3f,this.gl.uniform4f][t.length].call(this.gl,n,...t)}_getLocationForUniform(e,t){return console.assert(2===e.resourceType),e.uniformLocations.hasOwnProperty(t)||(e.uniformLocations[t]=this.gl.getUniformLocation(e.resource,t)),e.uniformLocations[t]}getShaderProgramResource(...e){const t=this.gl.createProgram();for(let n of e)console.assert(1===n.resourceType||0===n.resourceType),this.gl.attachShader(t,n.resource);if(this.gl.linkProgram(t),!this.gl.getProgramParameter(t,this.gl.LINK_STATUS))throw this.gl.getProgramInfoLog(t);return{resourceType:2,resource:t,attributeLocations:{},uniformLocations:{}}}getShaderResource(e,t){console.assert(1===e||0===e);const n=this.gl.createShader(1===e?this.gl.VERTEX_SHADER:this.gl.FRAGMENT_SHADER);if(this.gl.shaderSource(n,t),this.gl.compileShader(n),!this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)){const e=this.gl.getShaderInfoLog(n);throw this.gl.deleteShader(n),e}return{resourceType:e,resource:n}}getFloat32ArrayResource(e){const t=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(e),this.gl.STATIC_DRAW),{resourceType:3,resource:t}}getTextureResource(e,t,n,i){console.assert(4==e||5==e);const r=this.gl.createTexture();this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,5!=e||this.gl.getExtension("OES_texture_float_linear")?this.gl.LINEAR:this.gl.NEAREST);const s={resourceType:e,resource:r};return this.loadTexture(s,t,n,i),s}loadTexture(e,t,n,i){console.assert(4==e.resourceType||5==e.resourceType),void 0===n&&void 0===i&&(n=t.width,i=t.height),this.gl.bindTexture(this.gl.TEXTURE_2D,e.resource);const[r,s,o]=(()=>{switch(e.resourceType){case 4:return[this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE];case 5:return[this.singleChannelFloatFormat,this.gl.RED,this.floatType]}})();this.gl.texImage2D(this.gl.TEXTURE_2D,0,r,n,i,0,s,o,t)}destroyResources(...e){for(let t of e)if(null!=t)switch(t.resourceType){case 0:case 1:this.gl.deleteShader(t.resource);break;case 2:this.gl.deleteProgram(t.resource);break;case 3:this.gl.deleteBuffer(t.resource);break;case 4:case 5:this.gl.deleteTexture(t.resource)}}}function t(e,t){const n=parseFloat(e);return isNaN(n)?t:n}class n extends HTMLElement{static kDefaultSigmaInitial=.7;static kDefaultMuInitial=0;static kDefaultAttenuation=.45;constructor(){super(),this.attachShadow({mode:"open"});const t=document.createElement("style");t.textContent="\n            :host {\n                display: block;\n            }\n\n            canvas {\n                width: 100%;\n                height: 100%;\n            }",this.shadowRoot.append(t),this.canvas=document.createElement("canvas"),this.shadowRoot.append(this.canvas),this.glContext=new e(this.canvas)}#e;#t=n.kDefaultSigmaInitial;#n=n.kDefaultMuInitial;#i=n.kDefaultAttenuation;#r;#s=null;#o=!1;connectedCallback(){this.initResources();let e=NaN;this.hasAttribute("seed")&&(e=parseInt(this.getAttribute("seed"))),isNaN(e)?this.#e=Math.floor(4294967295*Math.random()):this.#e=4294967295&e,this.hasAttribute("gradient-source")&&(this.#r=document.getElementById(this.getAttribute("gradient-source"))),this.hasAttribute("sigma-initial")&&(this.#t=t(this.getAttribute("sigma-initial"),this.#t)),this.hasAttribute("mu-initial")&&(this.#n=t(this.getAttribute("mu-initial"),this.#t)),this.hasAttribute("attenuation")&&(this.#i=t(this.getAttribute("attenuation"),this.#i)),this.glContext.attachResizeHandler((()=>{this.drawPlasmaInAnimationFrame()}))}disconnectedCallback(){this.glContext.detachResizeHandler(),this.#o=!1,this.glContext.destroyResources(this.viewportRectangle,this.plasmaShaderProgram,this.projectionShader,this.plasmaShaderthis,this.#s,this.#a),this.#s=null}static get observedAttributes(){return["seed","gradient-source","sigma-initial","mu-initial","attenuation"]}attributeChangedCallback(e,n,i){if("seed"===e){const e=parseInt(i);isNaN(e)||(this.#e=4294967295&e)}"gradient-source"===e&&(this.#r=document.getElementById(i),this.#o=!1),"sigma-initial"===e&&(this.#t=t(i,this.#t)),"mu-initial"===e&&(this.#n=t(i,this.#n)),"attenuation"===e&&(this.#i=t(i,this.#i))}setRandomSeed(){this.#e=Math.floor(4294967295*Math.random())}#a;initResources(){const t=[[0,0],[0,1],[1,0],[1,1]].flat();this.viewportRectangle=this.glContext.getFloat32ArrayResource(t);const n=this.glContext.getShaderResource(e.vertexShaderResourceType,'#version 300 es\n    precision highp float;\n    precision highp int;\n\n    uniform float uAspectRatio;\n\n    // (0, 0) represents the top-left corner, and (1, 1) the bottom-right corner.\n    in vec2 aCorner;\n\n    // Each fragment gets assigned a "logical" coordinates within the outer bounding square of the\n    // fractal. From most to least significant, the bits in each coordinate represent which\n    // side of the center line the fragment belongs on at each recursive step.\n    out vec2 vLogicalCoordinate;\n\n    void main() {\n        float maxLogicalCoordinate = float(65536);\n        vLogicalCoordinate = vec2(maxLogicalCoordinate, maxLogicalCoordinate) * aCorner;\n\n        // Transform the corners into "clip space," which ranges from (-1, 1) in the top left to\n        // (1, -1) in the bottom right. When the canvas\'s aspect ratio is not square, we lengthen\n        // the rectangle in one direction to compensate.\n        vec2 positionInClipSpace =  vec2(2.0, -2.0) * aCorner + vec2(-1.0, 1.0);\n        if (uAspectRatio < 1.0) {\n            positionInClipSpace.x /= uAspectRatio;\n        } else if (uAspectRatio > 1.0) {\n            positionInClipSpace.y *= uAspectRatio;\n        }\n        gl_Position = vec4(positionInClipSpace, 0.0, 1.0);\n    }\n'),i=this.glContext.getShaderResource(e.fragmentShaderResourceType,'#version 300 es\n    precision highp float;\n    precision highp int;\n\n    in vec2 vLogicalCoordinate;\n    out vec4 FragColor;\n\n    uniform int uSeed;\n\n    uniform float uSigmaInitial;\n    uniform float uMuInitial;\n    uniform float uAttenuation;\n\n    uniform sampler2D uGradient;\n    uniform sampler2D uNormalLookupTable;\n\n    const float maxRandomValue = pow(2.0, 31.0);\n\n    /**\n     * Implementation of the venerable "xorwow" algorithm.\n     * Marsaglia, G. (2003). Xorshift RNGs. Journal of Statistical Software, 8(14), 1-6.\n     * https://doi.org/10.18637/jss.v008.i14\n     * \n     * This implementation originally used a struct to store the 6 state variables, but some GLSL\n     * implementations use smaller ints in struct members, even when the members are explicitly\n     * declared with the "highp" attribute. The smaller ints caused this algorithm to break on those\n     * platforms.\n     */\n    void advancePRNG(inout int state[6]) {\n        int temp = state[4] ^ (state[4] >> 2);\n        state[4] = state[3];\n        state[3] = state[2];\n        state[2] = state[1];\n        state[1] = state[0];\n        state[0] = (state[0] ^ (state[0] << 4)) ^ (temp ^ (temp << 1));\n\n        state[5] += 362437;\n    }\n\n    int readRandomValue(inout int state[6]) {\n        return state[0] + state[5];\n    }\n\n    // We use the "xor" PRNG (from the same paper as "xorshift") to spread the bits of the two seed\n    // values out to the 6 values needed to initialize "xorwow."\n    int xor(inout int y) {\n        y ^= y << 13;\n        y ^= y >> 17;\n        y ^= y << 5;\n        return y;\n    }\n\n    void initPRNG(out int state[6], int seed1, int seed2) {\n        int y1 = seed1;\n        int y2 = seed2;\n\n        // Note that each call to state() mutates the "y" input.\n        state[0] = xor(y1);\n        state[1] = xor(y2);\n        state[2] = xor(y1);\n        state[3] = xor(y2);\n        state[4] = xor(y1);\n        state[5] = xor(y2);\n\n        // "Prime" the random number generator by flushing the seed data out of the initial state.\n        // This step is not necessary in general, but this plasma fractal algorithm uses many\n        // different PRNGs with seeds that we need to diverge right away, even when the seeds differ\n        // by only a few bits. Without this priming step, the similarly-seeded generators generate\n        // similar results, manifesting as visible repeating patterns in the output image.\n        for (int i = 0; i < 15; ++i) {\n            advancePRNG(state);\n        }\n    }\n\n    void initCorners(inout float cornerValues[4]) {\n        int[6] state;\n        initPRNG(state, uSeed, 0x40000000);\n        for (int i = 0; i < 4; i++) {\n            advancePRNG(state);\n            cornerValues[i] = abs(float(readRandomValue(state))) / maxRandomValue;\n        }\n    }\n\n    // Box-Muller Transform\n    // https://en.wikipedia.org/wiki/Box-Muller_transform\n    float generateGuassianRandom(inout int state[6], float sigma, float mu) {\n        // Choose random values u1 and u2 from the uniform distribution in range (0, 1), which we\n        // map to a random variable from the standard normal distribution. The computation is\n        // done in advance and stored in a table, which also shifts the output range of the uniform\n        // PRNG (which can include 0) to the open interval.\n        advancePRNG(state);\n        float u1 = float(readRandomValue(state)) / (2.0 * maxRandomValue) + 0.5;\n\n        advancePRNG(state);\n        float u2 = float(readRandomValue(state)) / (2.0 * maxRandomValue) + 0.5;\n\n        return sigma * texture(uNormalLookupTable, vec2(u1, u2)).x + mu;\n    }\n\n    void main() {\n        float cornerValues[4];\n        initCorners(cornerValues);\n\n        float mu = uMuInitial;\n        float sigma = uSigmaInitial;\n\n        int quadrantMask = 1 << 15;\n        int midpointIndex = 0x1;\n        for (int i = 0; i < 8; i++) {\n            int quadrant = ((int(vLogicalCoordinate.x) & quadrantMask) == 0 ? 0 : 1) ^\n                ((int(vLogicalCoordinate.y) & quadrantMask) == 0 ? 0 : 3);\n\n            float subQuadrantCornerValues[4];\n            subQuadrantCornerValues[0] = cornerValues[quadrant];\n            subQuadrantCornerValues[1] =\n                (cornerValues[quadrant] + cornerValues[(quadrant + 1) % 4]) / 2.0;\n            subQuadrantCornerValues[2] =\n                (cornerValues[0] + cornerValues[1] + cornerValues[2] + cornerValues[3]) / 4.0;\n            subQuadrantCornerValues[3] =\n                (cornerValues[(quadrant + 3) % 4] + cornerValues[quadrant]) / 2.0;\n\n            // Choose a random value to displace the midpoint by.\n            int state[6];\n            initPRNG(state, uSeed, midpointIndex);\n\n            float displacement = generateGuassianRandom(state, sigma, mu);\n            sigma *= uAttenuation;\n            mu *= uAttenuation;\n\n            subQuadrantCornerValues[2] += displacement;\n\n            midpointIndex = midpointIndex << 2 | quadrant;\n\n            for (int j = 0; j < 4; j++) {\n                cornerValues[j] = subQuadrantCornerValues[(j - quadrant + 4) % 4];\n            }\n\n            quadrantMask >>= 1;\n        }\n\n        int quadrant = ((int(vLogicalCoordinate.x) & quadrantMask) == 0 ? 0 : 1) ^\n            ((int(vLogicalCoordinate.y) & quadrantMask) == 0 ? 0 : 3);\n        float value = cornerValues[quadrant];\n        FragColor = texture(uGradient, vec2(value, 0.0));\n    }\n');this.plasmaShaderProgram=this.glContext.getShaderProgramResource(n,i),this.#a=this.computeNormalLookupTableWithGPU()||this.computeNormalLookupTableWithCPU()}computeNormalLookupTableWithGPU(){return this.glContext.drawToTexture(e.f32TextureResourceType,1024,1024,(t=>{const n=[[-1,-1],[-1,1025],[1025,-1],[1025,1025]].flat(),i=t.getFloat32ArrayResource(n),r=t.getShaderResource(e.vertexShaderResourceType,"#version 300 es\n    precision highp float;\n    precision highp int;\n\n    in vec2 aCanvasCoordinates;\n    in vec2 aParameterCoordinates;\n\n    out vec2 vParameter;\n\n    uniform vec2 uCanvasDimensions;\n\n    void main() {\n        vParameter = aParameterCoordinates;\n\n        vec2 result = 2.0 * aCanvasCoordinates / uCanvasDimensions - 1.0;\n        gl_Position = vec4(result, 0.0, 1.0);\n    }\n"),s=t.getShaderResource(e.fragmentShaderResourceType,"#version 300 es\n    precision highp float;\n    precision highp int;\n\n    in vec2 vParameter;\n    out vec4 FragColor;\n\n    uniform int uSeed;\n\n    const float twoPi = radians(360.0);\n\n    void main() {\n        float result = sqrt(-2.0 * log(vParameter.x)) * cos(twoPi * vParameter.y);\n        FragColor = vec4(result, 0.0, 0.0, 1.0);\n    }\n"),o=t.getShaderProgramResource(r,s);t.clear(),t.setActiveShaderProgram(o),t.assignVertexAttribute("aCanvasCoordinates",i,2),t.assignVertexAttribute("aParameterCoordinates",this.viewportRectangle,2),t.assignFloatUniformAttribute("uCanvasDimensions",1024,1024),t.drawTriangleStrip(0,4)}))}computeNormalLookupTableWithCPU(){const t=new Float32Array(1048576);for(let e=0;e<1024;e++)for(let n=0;n<1024;n++){const i=(e+1)/1026,r=(n+1)/1026;t[1024*n+e]=Math.sqrt(-2*Math.log(i))*Math.cos(2*Math.PI*r)}return this.glContext.getTextureResource(e.f32TextureResourceType,t,1024,1024)}drawPlasmaInAnimationFrame(){this.isConnected&&window.requestAnimationFrame((()=>{this.drawPlasma()}))}drawPlasma(){this.isConnected&&(this.updateGradientTexture(),this.glContext.clear(),this.glContext.setActiveShaderProgram(this.plasmaShaderProgram),this.glContext.setActiveTexture(0,this.#s),this.glContext.setActiveTexture(1,this.#a),this.glContext.assignVertexAttribute("aCorner",this.viewportRectangle,2),this.glContext.assignFloatUniformAttribute("uAspectRatio",this.canvas.width/this.canvas.height),this.glContext.assignIntUniformAttribute("uSeed",this.#e),this.glContext.assignFloatUniformAttribute("uSigmaInitial",this.#t),this.glContext.assignFloatUniformAttribute("uMuInitial",this.#n),this.glContext.assignFloatUniformAttribute("uAttenuation",this.#i),this.glContext.assignIntUniformAttribute("uGradient",0),this.glContext.assignIntUniformAttribute("uNormalLookupTable",1),this.glContext.drawTriangleStrip(0,4))}updateGradientTexture(){const t=this.#r.valueAsImageData||this.#r;this.#s?this.#o||this.glContext.loadTexture(this.#s,t):this.#s=this.glContext.getTextureResource(e.rgbaTextureResourceType,t),this.#o=!0}}var i,r;customElements.define("interactive-plasma-fractal",n),i=void 0,r=function(){var e,t,n,i,r,s={},o=[],a=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function l(e,t){for(var n in t)e[n]=t[n];return e}function d(e){var t=e.parentNode;t&&t.removeChild(e)}function h(e,t,n){var i,r,s,o,a=arguments;if(t=l({},t),3<arguments.length)for(n=[n],i=3;i<arguments.length;i++)n.push(a[i]);if(null!=n&&(t.children=n),null!=e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===t[r]&&(t[r]=e.defaultProps[r]);return o=t.key,null!=(s=t.ref)&&delete t.ref,null!=o&&delete t.key,c(e,t,o,s)}function c(t,n,i,r){var s={type:t,props:n,key:i,ref:r,n:null,i:null,e:0,o:null,l:null,c:null,constructor:void 0};return e.vnode&&e.vnode(s),s}function u(e){return e.children}function g(e,t){this.props=e,this.context=t}function p(e,t){if(null==t)return e.i?p(e.i,e.i.n.indexOf(e)+1):null;for(var n;t<e.n.length;t++)if(null!=(n=e.n[t])&&null!=n.o)return n.o;return"function"==typeof e.type?p(e):null}function f(e){var t,n;if(null!=(e=e.i)&&null!=e.c){for(e.o=e.c.base=null,t=0;t<e.n.length;t++)if(null!=(n=e.n[t])&&null!=n.o){e.o=e.c.base=n.o;break}return f(e)}}function m(r){(!r.f&&(r.f=!0)&&1===t.push(r)||i!==e.debounceRendering)&&(i=e.debounceRendering,(e.debounceRendering||n)(v))}function v(){var e,n,i,r,s,o,a,d;for(t.sort((function(e,t){return t.d.e-e.d.e}));e=t.pop();)e.f&&(r=i=void 0,o=(s=(n=e).d).o,a=n.p,d=n.u,n.u=!1,a&&(i=[],r=S(a,s,l({},s),n.w,void 0!==a.ownerSVGElement,null,i,d,null==o?p(s):o),T(i,s),r!=o&&f(s)))}function b(e,t,n,i,r,a,l,h,c){var u,g,f,m,v,b,x,w=n&&n.n||o,C=w.length;if(h==s&&(h=null!=a?a[0]:C?p(n,0):null),u=0,t.n=y(t.n,(function(n){if(null!=n){if(n.i=t,n.e=t.e+1,null===(f=w[u])||f&&n.key==f.key&&n.type===f.type)w[u]=void 0;else for(g=0;g<C;g++){if((f=w[g])&&n.key==f.key&&n.type===f.type){w[g]=void 0;break}f=null}if(m=S(e,n,f=f||s,i,r,a,l,null,h,c),(g=n.ref)&&f.ref!=g&&(x=x||[]).push(g,n.c||m,n),null!=m){if(null==b&&(b=m),null!=n.l)m=n.l,n.l=null;else if(a==f||m!=h||null==m.parentNode){e:if(null==h||h.parentNode!==e)e.appendChild(m);else{for(v=h,g=0;(v=v.nextSibling)&&g<C;g+=2)if(v==m)break e;e.insertBefore(m,h)}"option"==t.type&&(e.value="")}h=m.nextSibling,"function"==typeof t.type&&(t.l=m)}}return u++,n})),t.o=b,null!=a&&"function"!=typeof t.type)for(u=a.length;u--;)null!=a[u]&&d(a[u]);for(u=C;u--;)null!=w[u]&&k(w[u],w[u]);if(x)for(u=0;u<x.length;u++)E(x[u],x[++u],x[++u])}function y(e,t,n){if(null==n&&(n=[]),null==e||"boolean"==typeof e)t&&n.push(t(null));else if(Array.isArray(e))for(var i=0;i<e.length;i++)y(e[i],t,n);else n.push(t?t(function(e){if(null==e||"boolean"==typeof e)return null;if("string"==typeof e||"number"==typeof e)return c(null,e,null,null);if(null==e.o&&null==e.c)return e;var t=c(e.type,e.props,e.key,null);return t.o=e.o,t}(e)):e);return n}function x(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===a.test(t)?n+"px":null==n?"":n}function w(e,t,n,i,r){var s,o,a,l,d;if("key"===(t=r?"className"===t?"class":t:"class"===t?"className":t)||"children"===t);else if("style"===t)if(s=e.style,"string"==typeof n)s.cssText=n;else{if("string"==typeof i&&(s.cssText="",i=null),i)for(o in i)n&&o in n||x(s,o,"");if(n)for(a in n)i&&n[a]===i[a]||x(s,a,n[a])}else"o"===t[0]&&"n"===t[1]?(l=t!==(t=t.replace(/Capture$/,"")),t=((d=t.toLowerCase())in e?d:t).slice(2),n?(i||e.addEventListener(t,C,l),(e.t||(e.t={}))[t]=n):e.removeEventListener(t,C,l)):"list"!==t&&"tagName"!==t&&"form"!==t&&!r&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n?e.removeAttribute(t):e.setAttribute(t,n))}function C(t){return this.t[t.type](e.event?e.event(t):t)}function S(t,n,i,r,a,d,h,c,p,f){var m,v,x,C,S,T,E,k,R,L,I=n.type;if(void 0!==n.constructor)return null;(m=e.e)&&m(n);try{e:if("function"==typeof I){if(k=n.props,R=(m=I.contextType)&&r[m.c],L=m?R?R.props.value:m.i:r,i.c?E=(v=n.c=i.c).i=v.k:("prototype"in I&&I.prototype.render?n.c=v=new I(k,L):(n.c=v=new g(k,L),v.constructor=I,v.render=A),R&&R.sub(v),v.props=k,v.state||(v.state={}),v.context=L,v.w=r,x=v.f=!0,v.m=[]),null==v.j&&(v.j=v.state),null!=I.getDerivedStateFromProps&&l(v.j==v.state?v.j=l({},v.j):v.j,I.getDerivedStateFromProps(k,v.j)),x)null==I.getDerivedStateFromProps&&null!=v.componentWillMount&&v.componentWillMount(),null!=v.componentDidMount&&h.push(v);else{if(null==I.getDerivedStateFromProps&&null==c&&null!=v.componentWillReceiveProps&&v.componentWillReceiveProps(k,L),!c&&null!=v.shouldComponentUpdate&&!1===v.shouldComponentUpdate(k,v.j,L)){for(v.props=k,v.state=v.j,v.f=!1,(v.d=n).o=null!=p?p!==i.o?p:i.o:null,n.n=i.n,m=0;m<n.n.length;m++)n.n[m]&&(n.n[m].i=n);break e}null!=v.componentWillUpdate&&v.componentWillUpdate(k,v.j,L)}for(C=v.props,S=v.state,v.context=L,v.props=k,v.state=v.j,(m=e.M)&&m(n),v.f=!1,v.d=n,v.p=t,m=v.render(v.props,v.state,v.context),n.n=y(null!=m&&m.type==u&&null==m.key?m.props.children:m),null!=v.getChildContext&&(r=l(l({},r),v.getChildContext())),x||null==v.getSnapshotBeforeUpdate||(T=v.getSnapshotBeforeUpdate(C,S)),b(t,n,i,r,a,d,h,p,f),v.base=n.o;m=v.m.pop();)v.j&&(v.state=v.j),m.call(v);x||null==C||null==v.componentDidUpdate||v.componentDidUpdate(C,S,T),E&&(v.k=v.i=null)}else n.o=function(e,t,n,i,r,a,l,d){var h,c,u,g,p=n.props,f=t.props;if(r="svg"===t.type||r,null==e&&null!=a)for(h=0;h<a.length;h++)if(null!=(c=a[h])&&(null===t.type?3===c.nodeType:c.localName===t.type)){e=c,a[h]=null;break}if(null==e){if(null===t.type)return document.createTextNode(f);e=r?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type),a=null}return null===t.type?p!==f&&(null!=a&&(a[a.indexOf(e)]=null),e.data=f):t!==n&&(null!=a&&(a=o.slice.call(e.childNodes)),u=(p=n.props||s).dangerouslySetInnerHTML,g=f.dangerouslySetInnerHTML,d||(g||u)&&(g&&u&&g.O==u.O||(e.innerHTML=g&&g.O||"")),function(e,t,n,i,r){var s;for(s in n)s in t||w(e,s,null,n[s],i);for(s in t)r&&"function"!=typeof t[s]||"value"===s||"checked"===s||n[s]===t[s]||w(e,s,t[s],n[s],i)}(e,f,p,r,d),t.n=t.props.children,g||b(e,t,n,i,"foreignObject"!==t.type&&r,a,l,s,d),d||("value"in f&&void 0!==f.value&&f.value!==e.value&&(e.value=null==f.value?"":f.value),"checked"in f&&void 0!==f.checked&&f.checked!==e.checked&&(e.checked=f.checked))),e}(i.o,n,i,r,a,d,h,f);(m=e.diffed)&&m(n)}catch(t){e.o(t,n,i)}return n.o}function T(t,n){for(var i;i=t.pop();)try{i.componentDidMount()}catch(t){e.o(t,i.d)}e.c&&e.c(n)}function E(t,n,i){try{"function"==typeof t?t(n):t.current=n}catch(t){e.o(t,i)}}function k(t,n,i){var r,s,o;if(e.unmount&&e.unmount(t),(r=t.ref)&&E(r,null,n),i||"function"==typeof t.type||(i=null!=(s=t.o)),t.o=t.l=null,null!=(r=t.c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(t){e.o(t,n)}r.base=r.p=null}if(r=t.n)for(o=0;o<r.length;o++)r[o]&&k(r[o],n,i);null!=s&&d(s)}function A(e,t,n){return this.constructor(e,n)}function R(){return(R=Object.assign||function(e){for(var t=arguments,n=1;n<arguments.length;n++){var i=t[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}e={},g.prototype.setState=function(e,t){var n=this.j!==this.state&&this.j||(this.j=l({},this.state));"function"==typeof e&&!(e=e(n,this.props))||l(n,e),null!=e&&this.d&&(this.u=!1,t&&this.m.push(t),m(this))},g.prototype.forceUpdate=function(e){this.d&&(e&&this.m.push(e),this.u=!0,m(this))},g.prototype.render=u,t=[],n="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,i=e.debounceRendering,e.o=function(e,t,n){for(var i;t=t.i;)if((i=t.c)&&!i.i)try{if(i.constructor&&null!=i.constructor.getDerivedStateFromError)i.setState(i.constructor.getDerivedStateFromError(e));else{if(null==i.componentDidCatch)continue;i.componentDidCatch(e)}return m(i.k=i)}catch(t){e=t}throw e},r=s;var L="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",I="[\\s|\\(]+("+L+")[,|\\s]+("+L+")[,|\\s]+("+L+")\\s*\\)?",P="[\\s|\\(]+("+L+")[,|\\s]+("+L+")[,|\\s]+("+L+")[,|\\s]+("+L+")\\s*\\)?",F=new RegExp("rgb"+I),M=new RegExp("rgba"+P),_=new RegExp("hsl"+I),D=new RegExp("hsla"+P),B="^(?:#?|0x?)",O="([0-9a-fA-F]{1})",U="([0-9a-fA-F]{2})",N=new RegExp(B+O+O+O+"$"),j=new RegExp(B+O+O+O+O+"$"),H=new RegExp(B+U+U+U+"$"),G=new RegExp(B+U+U+U+U+"$"),V=Math.log,z=Math.round,W=Math.floor;function X(e,t,n){return Math.min(Math.max(e,t),n)}function q(e,t){var n=-1<e.indexOf("%"),i=parseFloat(e);return n?t/100*i:i}function $(e){return parseInt(e,16)}function Y(e){return e.toString(16).padStart(2,"0")}var Q=function(){function e(e,t){this.$={h:0,s:0,v:0,a:1},e&&this.set(e),this.onChange=t,this.initialValue=R({},this.$)}var t=e.prototype;return t.set=function(t){if("string"==typeof t)/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(t)?this.hexString=t:/^rgba?/.test(t)?this.rgbString=t:/^hsla?/.test(t)&&(this.hslString=t);else{if("object"!=typeof t)throw new Error("Invalid color value");t instanceof e?this.hsva=t.hsva:"r"in t&&"g"in t&&"b"in t?this.rgb=t:"h"in t&&"s"in t&&"v"in t?this.hsv=t:"h"in t&&"s"in t&&"l"in t?this.hsl=t:"kelvin"in t&&(this.kelvin=t.kelvin)}},t.setChannel=function(e,t,n){var i;this[e]=R({},this[e],((i={})[t]=n,i))},t.reset=function(){this.hsva=this.initialValue},t.clone=function(){return new e(this)},t.unbind=function(){this.onChange=void 0},e.hsvToRgb=function(e){var t=e.h/60,n=e.s/100,i=e.v/100,r=W(t),s=t-r,o=i*(1-n),a=i*(1-s*n),l=i*(1-(1-s)*n),d=r%6,h=[l,i,i,a,o,o][d],c=[o,o,l,i,i,a][d];return{r:X(255*[i,a,o,o,l,i][d],0,255),g:X(255*h,0,255),b:X(255*c,0,255)}},e.rgbToHsv=function(e){var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),s=Math.min(t,n,i),o=r-s,a=0,l=r,d=0===r?0:o/r;switch(r){case s:a=0;break;case t:a=(n-i)/o+(n<i?6:0);break;case n:a=(i-t)/o+2;break;case i:a=(t-n)/o+4}return{h:60*a%360,s:X(100*d,0,100),v:X(100*l,0,100)}},e.hsvToHsl=function(e){var t=e.s/100,n=e.v/100,i=(2-t)*n,r=i<=1?i:2-i,s=r<1e-9?0:t*n/r;return{h:e.h,s:X(100*s,0,100),l:X(50*i,0,100)}},e.hslToHsv=function(e){var t=2*e.l,n=e.s*(t<=100?t:200-t)/100,i=t+n<1e-9?0:2*n/(t+n);return{h:e.h,s:X(100*i,0,100),v:X((t+n)/2,0,100)}},e.kelvinToRgb=function(e){var t,n,i,r=e/100;return i=r<66?(t=255,n=-155.25485562709179-.44596950469579133*(n=r-2)+104.49216199393888*V(n),r<20?0:.8274096064007395*(i=r-10)-254.76935184120902+115.67994401066147*V(i)):(t=351.97690566805693+.114206453784165*(t=r-55)-40.25366309332127*V(t),n=325.4494125711974+.07943456536662342*(n=r-50)-28.0852963507957*V(n),255),{r:X(W(t),0,255),g:X(W(n),0,255),b:X(W(i),0,255)}},e.rgbToKelvin=function(t){for(var n,i=t.r,r=t.b,s=2e3,o=4e4;.4<o-s;){var a=e.kelvinToRgb(n=.5*(o+s));a.b/a.r>=r/i?o=n:s=n}return n},function(e,t){t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t)}(e,[{key:"hsv",get:function(){var e=this.$;return{h:e.h,s:e.s,v:e.v}},set:function(e){var t=this.$;if(e=R({},t,e),this.onChange){var n={h:!1,v:!1,s:!1,a:!1};for(var i in t)n[i]=e[i]!=t[i];this.$=e,(n.h||n.s||n.v||n.a)&&this.onChange(this,n)}else this.$=e}},{key:"hsva",get:function(){return R({},this.$)},set:function(e){this.hsv=e}},{key:"hue",get:function(){return this.$.h},set:function(e){this.hsv={h:e}}},{key:"saturation",get:function(){return this.$.s},set:function(e){this.hsv={s:e}}},{key:"value",get:function(){return this.$.v},set:function(e){this.hsv={v:e}}},{key:"alpha",get:function(){return this.$.a},set:function(e){this.hsv=R({},this.hsv,{a:e})}},{key:"kelvin",get:function(){return e.rgbToKelvin(this.rgb)},set:function(t){this.rgb=e.kelvinToRgb(t)}},{key:"red",get:function(){return this.rgb.r},set:function(e){this.rgb=R({},this.rgb,{r:e})}},{key:"green",get:function(){return this.rgb.g},set:function(e){this.rgb=R({},this.rgb,{g:e})}},{key:"blue",get:function(){return this.rgb.b},set:function(e){this.rgb=R({},this.rgb,{b:e})}},{key:"rgb",get:function(){var t=e.hsvToRgb(this.$),n=t.r,i=t.g,r=t.b;return{r:z(n),g:z(i),b:z(r)}},set:function(t){this.hsv=R({},e.rgbToHsv(t),{a:void 0===t.a?1:t.a})}},{key:"rgba",get:function(){return R({},this.rgb,{a:this.alpha})},set:function(e){this.rgb=e}},{key:"hsl",get:function(){var t=e.hsvToHsl(this.$),n=t.h,i=t.s,r=t.l;return{h:z(n),s:z(i),l:z(r)}},set:function(t){this.hsv=R({},e.hslToHsv(t),{a:void 0===t.a?1:t.a})}},{key:"hsla",get:function(){return R({},this.hsl,{a:this.alpha})},set:function(e){this.hsl=e}},{key:"rgbString",get:function(){var e=this.rgb;return"rgb("+e.r+", "+e.g+", "+e.b+")"},set:function(e){var t,n,i,r,s=1;if((t=F.exec(e))?(n=q(t[1],255),i=q(t[2],255),r=q(t[3],255)):(t=M.exec(e))&&(n=q(t[1],255),i=q(t[2],255),r=q(t[3],255),s=q(t[4],1)),!t)throw new Error("Invalid rgb string");this.rgb={r:n,g:i,b:r,a:s}}},{key:"rgbaString",get:function(){var e=this.rgba;return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},set:function(e){this.rgbString=e}},{key:"hexString",get:function(){var e=this.rgb;return"#"+Y(e.r)+Y(e.g)+Y(e.b)},set:function(e){var t,n,i,r,s=255;if((t=N.exec(e))?(n=17*$(t[1]),i=17*$(t[2]),r=17*$(t[3])):(t=j.exec(e))?(n=17*$(t[1]),i=17*$(t[2]),r=17*$(t[3]),s=17*$(t[4])):(t=H.exec(e))?(n=$(t[1]),i=$(t[2]),r=$(t[3])):(t=G.exec(e))&&(n=$(t[1]),i=$(t[2]),r=$(t[3]),s=$(t[4])),!t)throw new Error("Invalid hex string");this.rgb={r:n,g:i,b:r,a:s/255}}},{key:"hex8String",get:function(){var e=this.rgba;return"#"+Y(e.r)+Y(e.g)+Y(e.b)+Y(W(255*e.a))},set:function(e){this.hexString=e}},{key:"hslString",get:function(){var e=this.hsl;return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},set:function(e){var t,n,i,r,s=1;if((t=_.exec(e))?(n=q(t[1],360),i=q(t[2],100),r=q(t[3],100)):(t=D.exec(e))&&(n=q(t[1],360),i=q(t[2],100),r=q(t[3],100),s=q(t[4],1)),!t)throw new Error("Invalid hsl string");this.hsl={h:n,s:i,l:r,a:s}}},{key:"hslaString",get:function(){var e=this.hsla;return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},set:function(e){this.hslString=e}}]),e}();function K(e){var t,n=e.width,i=e.sliderSize,r=e.borderWidth,s=e.handleRadius,o=e.padding,a=e.sliderShape,l="horizontal"===e.layoutDirection;return i=null!=(t=i)?t:2*o+2*s,"circle"===a?{handleStart:e.padding+e.handleRadius,handleRange:n-2*o-2*s,width:n,height:n,cx:n/2,cy:n/2,radius:n/2-r/2}:{handleStart:i/2,handleRange:n-i,radius:i/2,x:0,y:0,width:l?i:n,height:l?n:i}}var J,Z=2*Math.PI,ee=function(e,t){return(e%t+t)%t},te=function(e,t){return Math.sqrt(e*e+t*t)};function ne(e){return e.width/2-e.padding-e.handleRadius-e.borderWidth}function ie(e){var t=e.width/2;return{width:e.width,radius:t-e.borderWidth,cx:t,cy:t}}function re(e,t,n){var i=e.wheelAngle,r=e.wheelDirection;return n&&"clockwise"===r?t=i+t:"clockwise"===r?t=360-i+t:n&&"anticlockwise"===r?t=i+180-t:"anticlockwise"===r&&(t=i-t),ee(t,360)}function se(e,t,n){var i=ie(e),r=i.cx,s=i.cy,o=ne(e);t=r-t,n=s-n;var a=re(e,Math.atan2(-n,-t)*(360/Z)),l=Math.min(te(t,n),o);return{h:Math.round(a),s:Math.round(100/o*l)}}function oe(e){var t=e.width,n=e.boxHeight;return{width:t,height:null!=n?n:t,radius:e.padding+e.handleRadius}}function ae(e,t,n){var i=oe(e),r=i.width,s=i.height,o=i.radius,a=(t-o)/(r-2*o)*100,l=(n-o)/(s-2*o)*100;return{s:Math.max(0,Math.min(a,100)),v:Math.max(0,Math.min(100-l,100))}}function le(e,t,n,i){for(var r=0;r<i.length;r++){var s=i[r].x-t,o=i[r].y-n;if(Math.sqrt(s*s+o*o)<e.handleRadius)return r}return null}function de(e){return{boxSizing:"border-box",border:e.borderWidth+"px solid "+e.borderColor}}function he(e,t,n){return e+"-gradient("+t+", "+n.map((function(e){var t=e[0];return e[1]+" "+t+"%"})).join(",")+")"}function ce(e){return"string"==typeof e?e:e+"px"}var ue=["mousemove","touchmove","mouseup","touchend"],ge=function(e){function t(t){e.call(this,t),this.uid=(Math.random()+1).toString(36).substring(5)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){var t=this.handleEvent.bind(this),n={onMouseDown:t,ontouchstart:t},i="horizontal"===e.layoutDirection,r=null===e.margin?e.sliderMargin:e.margin,s={overflow:"visible",display:i?"inline-block":"block"};return 0<e.index&&(s[i?"marginLeft":"marginTop"]=r),h(u,null,e.children(this.uid,n,s))},t.prototype.handleEvent=function(e){var t=this,n=this.props.onInput,i=this.base.getBoundingClientRect();e.preventDefault();var r=e.touches?e.changedTouches[0]:e,s=r.clientX-i.left,o=r.clientY-i.top;switch(e.type){case"mousedown":case"touchstart":!1!==n(s,o,0)&&ue.forEach((function(e){document.addEventListener(e,t,{passive:!1})}));break;case"mousemove":case"touchmove":n(s,o,1);break;case"mouseup":case"touchend":n(s,o,2),ue.forEach((function(e){document.removeEventListener(e,t,{passive:!1})}))}},t}(g);function pe(e){var t=e.r,n=e.url,i=t,r=t;return h("svg",{className:"IroHandle IroHandle--"+e.index+" "+(e.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+ce(e.x)+", "+ce(e.y)+")",willChange:"transform",top:ce(-t),left:ce(-t),width:ce(2*t),height:ce(2*t),position:"absolute",overflow:"visible"}},n&&h("use",Object.assign({xlinkHref:function(e){J=J||document.getElementsByTagName("base");var t=window.navigator.userAgent,n=/^((?!chrome|android).)*safari/i.test(t),i=/iPhone|iPod|iPad/i.test(t),r=window.location;return(n||i)&&0<J.length?r.protocol+"//"+r.host+r.pathname+r.search+e:e}(n)},e.props)),!n&&h("circle",{cx:i,cy:r,r:t,fill:"none","stroke-width":2,stroke:"#000"}),!n&&h("circle",{cx:i,cy:r,r:t-2,fill:e.fill,"stroke-width":2,stroke:"#fff"}))}function fe(e){var t=e.activeIndex,n=void 0!==t&&t<e.colors.length?e.colors[t]:e.color,i=K(e),r=i.width,s=i.height,o=i.radius,a=function(e,t){var n=K(e),i=n.width,r=n.height,s=n.handleRange,o=n.handleStart,a="horizontal"===e.layoutDirection,l=a?i/2:r/2,d=o+function(e,t){var n=t.hsva,i=t.rgb;switch(e.sliderType){case"red":return i.r/2.55;case"green":return i.g/2.55;case"blue":return i.b/2.55;case"alpha":return 100*n.a;case"kelvin":var r=e.minTemperature,s=e.maxTemperature-r,o=(t.kelvin-r)/s*100;return Math.max(0,Math.min(o,100));case"hue":return n.h/=3.6;case"saturation":return n.s;default:return n.v}}(e,t)/100*s;return a&&(d=-1*d+s+2*o),{x:a?l:d,y:a?d:l}}(e,n),l=function(e,t){var n=t.hsv,i=t.rgb;switch(e.sliderType){case"red":return[[0,"rgb(0,"+i.g+","+i.b+")"],[100,"rgb(255,"+i.g+","+i.b+")"]];case"green":return[[0,"rgb("+i.r+",0,"+i.b+")"],[100,"rgb("+i.r+",255,"+i.b+")"]];case"blue":return[[0,"rgb("+i.r+","+i.g+",0)"],[100,"rgb("+i.r+","+i.g+",255)"]];case"alpha":return[[0,"rgba("+i.r+","+i.g+","+i.b+",0)"],[100,"rgb("+i.r+","+i.g+","+i.b+")"]];case"kelvin":for(var r=[],s=e.minTemperature,o=e.maxTemperature,a=o-s,l=s,d=0;l<o;l+=a/8,d+=1){var h=Q.kelvinToRgb(l),c=h.r,u=h.g,g=h.b;r.push([12.5*d,"rgb("+c+","+u+","+g+")"])}return r;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var p=Q.hsvToHsl({h:n.h,s:0,v:n.v}),f=Q.hsvToHsl({h:n.h,s:100,v:n.v});return[[0,"hsl("+p.h+","+p.s+"%,"+p.l+"%)"],[100,"hsl("+f.h+","+f.s+"%,"+f.l+"%)"]];default:var m=Q.hsvToHsl({h:n.h,s:n.s,v:100});return[[0,"#000"],[100,"hsl("+m.h+","+m.s+"%,"+m.l+"%)"]]}}(e,n);return h(ge,Object.assign({},e,{onInput:function(t,i,r){var s=function(e,t,n){var i,r=K(e),s=r.handleRange,o=r.handleStart;i="horizontal"===e.layoutDirection?-1*n+s+o:t-o,i=Math.max(Math.min(i,s),0);var a=Math.round(100/s*i);switch(e.sliderType){case"kelvin":var l=e.minTemperature;return l+a/100*(e.maxTemperature-l);case"alpha":return a/100;case"hue":return 3.6*a;case"red":case"blue":case"green":return 2.55*a;default:return a}}(e,t,i);e.parent.inputActive=!0,n[e.sliderType]=s,e.onInput(r,e.id)}}),(function(t,i,d){return h("div",Object.assign({},i,{className:"IroSlider",style:Object.assign({},{position:"relative",width:ce(r),height:ce(s),borderRadius:ce(o),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},d)}),h("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:ce(o),background:he("linear","horizontal"===e.layoutDirection?"to top":"to right",l)},de(e))}),h(pe,{isActive:!0,index:n.index,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:a.x,y:a.y}))}))}function me(e){var t=ie(e).width,n=e.colors,i=(e.borderWidth,e.parent),r=e.color,s=r.hsv,o=n.map((function(t){return function(e,t){var n=t.hsv,i=ie(e),r=i.cx,s=i.cy,o=ne(e),a=(180+re(e,n.h,!0))*(Z/360),l=n.s/100*o,d="clockwise"===e.wheelDirection?-1:1;return{x:r+l*Math.cos(a)*d,y:s+l*Math.sin(a)*d}}(e,t)})),a={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};return h(ge,Object.assign({},e,{onInput:function(t,n,s){if(0===s){if(!function(e,t,n){var i=ie(e),r=i.cx,s=i.cy,o=e.width/2;return te(r-t,s-n)<o}(e,t,n))return!1;var a=le(e,t,n,o);null!==a?i.setActiveColor(a):(i.inputActive=!0,r.hsv=se(e,t,n),e.onInput(s,e.id))}else 1===s&&(i.inputActive=!0,r.hsv=se(e,t,n));e.onInput(s,e.id)}}),(function(i,l,d){return h("div",Object.assign({},l,{className:"IroWheel",style:Object.assign({},{width:ce(t),height:ce(t),position:"relative"},d)}),h("div",{className:"IroWheelHue",style:Object.assign({},a,{transform:"rotateZ("+(e.wheelAngle+90)+"deg)",background:"clockwise"===e.wheelDirection?"conic-gradient(red, yellow, lime, aqua, blue, magenta, red)":"conic-gradient(red, magenta, blue, aqua, lime, yellow, red)"})}),h("div",{className:"IroWheelSaturation",style:Object.assign({},a,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),e.wheelLightness&&h("div",{className:"IroWheelLightness",style:Object.assign({},a,{background:"#000",opacity:1-s.v/100})}),h("div",{className:"IroWheelBorder",style:Object.assign({},a,de(e))}),n.filter((function(e){return e!==r})).map((function(t){return h(pe,{isActive:!1,index:t.index,fill:t.hslString,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:o[t.index].x,y:o[t.index].y})})),h(pe,{isActive:!0,index:r.index,fill:r.hslString,r:e.activeHandleRadius||e.handleRadius,url:e.handleSvg,props:e.handleProps,x:o[r.index].x,y:o[r.index].y}))}))}pe.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}},fe.defaultProps=Object.assign({},{sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3});var ve=function(e){function t(t){var n=this;e.call(this,t),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=t.id,(0<t.colors.length?t.colors:[t.color]).forEach((function(e){return n.addColor(e)})),this.setActiveColor(0),this.state=Object.assign({},t,{color:this.color,colors:this.colors,layout:t.layout})}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.addColor=function(e,t){void 0===t&&(t=this.colors.length);var n=new Q(e,this.onColorChange.bind(this));this.colors.splice(t,0,n),this.colors.forEach((function(e,t){return e.index=t})),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",n)},t.prototype.removeColor=function(e){var t=this.colors.splice(e,1)[0];t.unbind(),this.colors.forEach((function(e,t){return e.index=t})),this.state&&this.setState({colors:this.colors}),t.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",t)},t.prototype.setActiveColor=function(e){this.color=this.colors[e],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},t.prototype.setColors=function(e,t){var n=this;void 0===t&&(t=0),this.colors.forEach((function(e){return e.unbind()})),this.colors=[],e.forEach((function(e){return n.addColor(e)})),this.setActiveColor(t),this.emit("color:setAll",this.colors)},t.prototype.on=function(e,t){var n=this,i=this.events;(Array.isArray(e)?e:[e]).forEach((function(e){(i[e]||(i[e]=[])).push(t),n.deferredEvents[e]&&(n.deferredEvents[e].forEach((function(e){t.apply(null,e)})),n.deferredEvents[e]=[])}))},t.prototype.off=function(e,t){var n=this;(Array.isArray(e)?e:[e]).forEach((function(e){var i=n.events[e];i&&i.splice(i.indexOf(t),1)}))},t.prototype.emit=function(e){for(var t=this,n=[],i=arguments.length-1;0<i--;)n[i]=arguments[i+1];var r=this.activeEvents;r.hasOwnProperty(e)&&r[e]||(r[e]=!0,(this.events[e]||[]).forEach((function(e){return e.apply(t,n)})),r[e]=!1)},t.prototype.deferredEmit=function(e){for(var t,n=[],i=arguments.length-1;0<i--;)n[i]=arguments[i+1];var r=this.deferredEvents;(t=this).emit.apply(t,[e].concat(n)),(r[e]||(r[e]=[])).push(n)},t.prototype.setOptions=function(e){this.setState(e)},t.prototype.resize=function(e){this.setOptions({width:e})},t.prototype.reset=function(){this.colors.forEach((function(e){return e.reset()})),this.setState({colors:this.colors})},t.prototype.onMount=function(e){this.el=e,this.deferredEmit("mount",this)},t.prototype.onColorChange=function(e,t){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",e,t)),this.emit("color:change",e,t)},t.prototype.emitInputEvent=function(e,t){0===e?this.emit("input:start",this.color,t):1===e?this.emit("input:move",this.color,t):2===e&&this.emit("input:end",this.color,t)},t.prototype.render=function(e,t){var n=this,i=t.layout;return Array.isArray(i)||(i=[{component:me},{component:fe}],t.transparency&&i.push({component:fe,options:{sliderType:"alpha"}})),h("div",{class:"IroColorPicker",id:t.id,style:{display:t.display}},i.map((function(e,i){var r=e.component,s=e.options;return h(r,Object.assign({},t,s,{ref:void 0,onInput:n.emitInputEvent.bind(n),parent:n,index:i}))})))},t}(g);ve.defaultProps=Object.assign({},{width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},{colors:[],display:"block",id:null,layout:"default",margin:null});var be,ye,xe,we,Ce=(Se.prototype=(be=ve).prototype,Object.assign(Se,be),Se.I=be,Se);function Se(t,n){var i,a=document.createElement("div");function l(){var e=t instanceof Element?t:document.querySelector(t);e.appendChild(i.base),i.onMount(e)}return function(t,n){var i,a,l;e.i&&e.i(t,n),a=(i=void 0===r)?null:n.n,t=h(u,null,[t]),l=[],S(n,n.n=t,a||s,s,void 0!==n.ownerSVGElement,a?null:o.slice.call(n.childNodes),l,!1,s,i),T(l,t)}(h(be,Object.assign({},{ref:function(e){return i=e}},n)),a),"loading"!==document.readyState?l():document.addEventListener("DOMContentLoaded",l),i}return(xe=ye=ye||{}).version="5.5.2",xe.Color=Q,xe.ColorPicker=Ce,(we=xe.ui||(xe.ui={})).h=h,we.ComponentBase=ge,we.Handle=pe,we.Slider=fe,we.Wheel=me,we.Box=function(e){var t=oe(e),n=t.width,i=t.height,r=t.radius,s=e.colors,o=e.parent,a=e.activeIndex,l=void 0!==a&&a<e.colors.length?e.colors[a]:e.color,d=function(e,t){return[[[0,"#fff"],[100,"hsl("+t.hue+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]]}(0,l),c=s.map((function(t){return function(e,t){var n=oe(e),i=n.width,r=n.height,s=n.radius,o=t.hsv,a=s,l=i-2*s,d=r-2*s;return{x:a+o.s/100*l,y:a+(d-o.v/100*d)}}(e,t)}));return h(ge,Object.assign({},e,{onInput:function(t,n,i){if(0===i){var r=le(e,t,n,c);null!==r?o.setActiveColor(r):(o.inputActive=!0,l.hsv=ae(e,t,n),e.onInput(i,e.id))}else 1===i&&(o.inputActive=!0,l.hsv=ae(e,t,n));e.onInput(i,e.id)}}),(function(t,o,a){return h("div",Object.assign({},o,{className:"IroBox",style:Object.assign({},{width:ce(n),height:ce(i),position:"relative"},a)}),h("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:ce(r)},de(e),{background:he("linear","to bottom",d[1])+","+he("linear","to right",d[0])})}),s.filter((function(e){return e!==l})).map((function(t){return h(pe,{isActive:!1,index:t.index,fill:t.hslString,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:c[t.index].x,y:c[t.index].y})})),h(pe,{isActive:!0,index:l.index,fill:l.hslString,r:e.activeHandleRadius||e.handleRadius,url:e.handleSvg,props:e.handleProps,x:c[l.index].x,y:c[l.index].y}))}))},ye},"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(i=i||self).iro=r();async function s(e){const t=Array.from(e.querySelectorAll("*")).filter((e=>e.getAnimations().some((e=>e instanceof CSSTransition))));if(0===t.length)return Promise.resolve();const n=t.map((e=>new Promise((t=>{e.addEventListener("transitionend",(()=>{t()}),{once:!0})}))));return Promise.all(n).then((()=>{s(e)}))}class o extends EventTarget{#l;#d;#h;#c;constructor(e,t,n){super(),this.#l=document.createElement("dialog"),this.#d=new iro.ColorPicker(this.#l.insertAdjacentElement("afterbegin",document.createElement("div")),{colors:t}),this.#d.setActiveColor(n),this.#d.on("input:change",(e=>{this.#h.style.backgroundColor=e.hexString,this.dispatchEvent(new CustomEvent("color-input",{detail:{newValue:e.hexString}}))})),this.#c=n,this.#d.on("color:setActive",(e=>{e.index!==this.#c&&(this.#c=e.index,this.#h.style.backgroundColor=e.hexString,this.dispatchEvent(new CustomEvent("selection-changed",{detail:{selectedIndex:this.#c}})))})),this.#h=document.createElement("div"),this.#h.classList.add("swatch"),this.#h.style.backgroundColor=t[n];const i=document.createElement("button");i.innerText="Delete",i.addEventListener("click",(()=>{this.dispatchEvent(new Event("delete"))}));const r=document.createElement("button");r.innerText="Done";const s=document.createElement("div");s.classList.add("dialog-row"),s.appendChild(this.#h),s.appendChild(i),s.appendChild(r),this.#l.appendChild(s);const o=new AbortController;new Promise((e=>{r.addEventListener("click",(()=>{this.#l.close()})),window.addEventListener("keydown",(e=>{"Escape"===e.key?this.#l.close():"Delete"!==e.key&&"Backspace"!==e.key||this.dispatchEvent(new Event("delete"))}),{signal:o.signal}),this.#l.addEventListener("mousedown",(e=>{e.stopPropagation()})),document.body.addEventListener("mousedown",(()=>{this.#l.close()}),{signal:o.signal}),this.#l.addEventListener("close",(()=>{e()}))})).finally((()=>{this.#l.remove(),o.abort(),this.dispatchEvent(new Event("dismiss"))})),e.appendChild(this.#l),this.#l.show()}close(){this.#l.close()}addColor(e){const t=this.#d.colors.length;this.#d.addColor(e),this.#d.setActiveColor(t)}setSelectedIndex(e){this.#c=e,this.#d.setActiveColor(this.#c),this.#h.style.backgroundColor=this.#d.color.hexString}}class a{#u;#g;#p;#f;constructor(e,t,n,i=!1){this.#g=t,this.#p=e,this.#f=n,this.#p.offset=[0,this.#p.offset,1].sort(((e,t)=>e-t))[1],this.#u=document.createElement("div"),this.#u.classList.add("rail-slider-base",...i?["just-created"]:[]),this.#u.style.setProperty("--offset",this.#p.offset);const r=document.createElement("div");r.classList.add("rail-slider","show-on-control-hover"),this.#p.color&&this.#u.style.setProperty("--gradient-stop-color",this.#p.color),r.addEventListener("mousedown",(e=>{e.preventDefault(),e.stopPropagation(),this._handlePressStart(this.#u.offsetLeft,{x:e.clientX,y:e.clientY})})),r.addEventListener("touchstart",(e=>{e.preventDefault(),e.stopPropagation();const t=e.changedTouches[0];this._handlePressStart(this.#u.offsetLeft,{x:t.clientX,y:e.clientY},t.identifier)}),{passive:!1});const s=document.createElement("div");s.classList.add("guide-blocker");const o=document.createElement("div");o.classList.add("triangle-marker-top");const a=document.createElement("div");a.classList.add("triangle-marker-bottom"),this.#u.appendChild(r),this.#u.appendChild(s),this.#u.appendChild(o),this.#u.appendChild(a),this.#g.appendChild(this.#u)}get colorValue(){return this.#p.color}markAsSelected(){this.#u.classList.add("selected")}unmarkAsSelected(){this.#u.classList.remove("selected")}#m=[];addUpdateHandler(e){this.#m.push(e)}#v=[];addDeleteHandler(e){this.#v.push(e)}handleSlideGestureFromCreation(e,t,n=null){setTimeout((()=>{this.#u.classList.remove("just-created")}),0);this._handlePressStart(e,t,n,n,!0);for(let e of this.#m)e()}_installMouseEventsForSlide(e,t,n,i){let r=!1;window.addEventListener("mousemove",(n=>{r=!0,this._handleSlide(e,t,{x:n.clientX,y:n.clientY})}),{signal:n.signal}),window.addEventListener("mouseup",(()=>{this.#u.dispatchEvent(new CustomEvent("press-finish",{bubbles:!0,detail:{fromTouch:!1}})),r||this.#u.dispatchEvent(new CustomEvent("press-finish-without-input",{bubbles:!0,detail:{controller:this,fromTouch:!1}})),i()}),{signal:n.signal})}_installTouchEventsForSlide(e,t,n,i,r){let s=!1;window.addEventListener("touchmove",(i=>{const r=Array.from(i.changedTouches).find((e=>e.identifier===n));r&&(Math.abs(t.x-r.clientX)>5&&(s=!0),this._handleSlide(e,t,{x:r.clientX,y:r.clientY}))}),{signal:i.signal,passive:!1}),window.addEventListener("touchend",(e=>{this.#u.dispatchEvent(new CustomEvent("press-finish",{bubbles:!0,detail:{fromTouch:!0}})),Array.from(e.changedTouches).find((e=>e.identifier===n))&&(s||this.#u.dispatchEvent(new CustomEvent("press-finish-without-input",{bubbles:!0,detail:{controller:this,fromTouch:!0}})),r())}),{signal:i.signal})}_handlePressStart(e,t,n=null,i=!1){this.#u.dispatchEvent(new CustomEvent("press-start",{bubbles:!0,detail:{controller:this}}));const r=new AbortController;new Promise((s=>{const o=this.#p.offset;this.#u.classList.add("sliding"),this.#f.classList.add("active-gesture"),null===n?this._installMouseEventsForSlide(e,t,r,s):this._installTouchEventsForSlide(e,t,n,r,s),window.addEventListener("keydown",(e=>{"Escape"===e.key?i?(this.delete(),s()):(this._setOffset(o),s()):"Delete"!==e.key&&"Backspace"!==e.key||(this.delete(),s())}),{signal:r.signal})})).then((()=>{r.abort(),this.#u.classList.remove("sliding"),this.#f.classList.remove("active-gesture")}))}updateColor(e){this.#u.style.setProperty("--gradient-stop-color",e),this.#p.color=e;for(let e of this.#m)e()}delete(){this.#u.classList.add("destroyed"),s(this.#u).then((()=>{this.#u.remove()}));for(let e of this.#v)e(this.#p)}_handleSlide(e,t,n){const i=this.#g.clientWidth,r=[0,e+n.x-t.x,i].sort(((e,t)=>e-t))[1];this._setOffset(r/i)}_setOffset(e){this.#p.offset=e,this.#u.style.setProperty("--offset",e);for(let e of this.#m)e()}}class l extends HTMLElement{#b;#y;#g;#x;#w;constructor(){super(),this.attachShadow({mode:"open"});const e=document.createElement("style");e.textContent="\n:host {\n    position: relative;\n    display: flex;\n    flex-direction: column;\n\n    width: 512px;\n    height: 70px;\n\n    --slider-size: 16px;\n\n    --marker-color: #rgb(0, 0, 0);\n    --marker-height: 8px;\n    --marker-width: 8px;\n\n    /* Extra space between bottom marker strip and rail. */\n    --marker-strip-clearance: 6px;\n\n    /* Space between point of the triangle marker and the gradient display. */\n    --marker-clearance: 2px;\n\n    --opacity-transition-time: 500ms;\n    --marker-transition-time: 200ms;\n    --slider-transition-time: 150ms;\n}\n\ncanvas {\n    flex-grow: 1;\n\n    width: 100%;\n    height: 1px;\n\n    margin: var(--marker-height) 0;\n\n    border-radius: 4px;\n}\n\ndiv.rail {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n\n    width: 100%;\n    height: var(--slider-size);\n\n    margin-top: var(--marker-strip-clearance);\n\n    cursor: pointer;\n}\n\ndiv.rail-guide {\n    width: 100%;\n    height: 2px;\n\n    background-color: rgb(0, 0, 0);\n\n    z-index: -2;\n}\n\ndiv.slider-container {\n    position: absolute;\n\n    padding: 0px;\n    margin: 0px;\n    border: 0px;\n\n    left: 0px;\n    top: 0px;\n    width: 100%;\n    height: 100%;\n\n    clip-path: padding-box inset(-20px 0px);\n\n    pointer-events: none;\n}\n\ndiv.rail-slider-base {\n    /* The slider's distance along the rail as a number in the range [0, 1]. */\n    --offset: 0;\n\n    position: absolute;\n\n    left: calc(var(--offset) * 100%);\n    top: 0px;\n\n    height: 100%;\n}\n\ndiv.rail-slider {\n    position: absolute;\n\n    left: 0px;\n    bottom: 0px;\n    width: var(--slider-size);\n    height: var(--slider-size);\n\n    transform: translateX(-50%);\n\n    cursor: pointer;\n    pointer-events: all;\n\n    /* Using the offset value for the z-index ensures that, when multiple sliders overlap, they\n     * stack from left to right. */\n    z-index: calc(1000000 * var(--offset));\n}\n\ndiv.rail-slider:hover,\ndiv.rail-slider-base.sliding div.rail-slider {\n    z-index: 10000000000;\n}\n\ndiv.rail-slider::before {\n    content: ' ';\n    display: block;\n\n    width: 100%;\n    height: 100%;\n\n    border-radius: 50%;\n\n    background-color: var(--gradient-stop-color);\n\n    transition: transform var(--slider-transition-time);\n}\n\ndiv.rail-slider-base.selected div.rail-slider::before {\n    box-shadow: 0px 0px 0px 3px #000000;\n}\n\ndiv.rail-slider:hover::before,\ndiv.rail-slider-base.sliding div.rail-slider::before {\n    transform: scale(1.3);\n}\n\ndiv.rail-slider-base.just-created div.rail-slider::before {\n    transform: scale(0);\n}\n\ndiv.rail-slider-base.destroyed div.rail-slider {\n    pointer-events: none;\n}\n\ndiv.rail-slider-base.destroyed div.rail-slider::before {\n    transform: scale(0);\n}\n\ndiv.guide-blocker {\n    position: absolute;\n\n    left: 0px;\n    bottom: 0px;\n    width: calc(var(--slider-size) + 6px);\n    height: var(--slider-size);\n\n    transform: translateX(-50%);\n    transition: transform var(--slider-transition-time);\n\n    background-color: var(--rail-background-color, rgb(255, 255, 255));\n\n    z-index: -1;\n}\n\ndiv.rail-slider:hover + div.guide-blocker,\ndiv.rail-slider-base.sliding div.guide-blocker {\n    transform: translateX(-50%) scaleX(1.3);\n}\n\ndiv.rail-slider-base.just-created div.guide-blocker,\ndiv.rail-slider-base.destroyed div.guide-blocker {\n    transform: translateX(-50%) scaleX(0);\n}\n\ndiv.triangle-marker-top {\n    position: absolute;\n    left: 0px;\n    top: calc(-1 * var(--marker-clearance));\n\n    width: 0px;\n    height: 0px;\n\n    border-top-width: var(--marker-height);\n    border-top-style: solid;\n    border-top-color: var(--marker-color);\n    border-left-width: calc(var(--marker-width)/ 2);\n    border-left-style: solid;\n    border-left-color: transparent;\n    border-right-width: calc(var(--marker-width)/ 2);\n    border-right-style: solid;\n    border-right-color: transparent;\n\n    opacity: 0%;\n    transform: translateX(-50%);\n    transition: opacity var(--marker-transition-time), transform var(--marker-transition-time);\n}\n\ndiv.rail-slider-base.sliding div.triangle-marker-top {\n    opacity: 100%;\n    transform: translateX(-50%) translateY(6px);\n}\n\ndiv.triangle-marker-bottom {\n    position: absolute;\n    left: 0px;\n    bottom: calc(var(--slider-size) + var(--marker-strip-clearance) - var(--marker-clearance));\n\n    width: 0px;\n    height: 0px;\n\n    border-left-width: calc(var(--marker-width)/ 2);\n    border-left-style: solid;\n    border-left-color: transparent;\n    border-right-width: calc(var(--marker-width)/ 2);\n    border-right-style: solid;\n    border-right-color: transparent;\n    border-bottom-width: var(--marker-height);\n    border-bottom-style: solid;\n    border-bottom-color: var(--marker-color);\n\n    opacity: 0%;\n    transform: translateX(-50%);\n    transition: opacity var(--marker-transition-time), transform var(--marker-transition-time);\n}\n\ndiv.rail-slider-base.sliding div.triangle-marker-bottom {\n    transform: translateX(-50%) translateY(-6px);\n}\n\n:host(.active-gesture) div.triangle-marker-bottom {\n    opacity: 100%;\n}\n\ndiv.rail-slider-base.destroyed div.triangle-marker-top,\ndiv.rail-slider-base.destroyed div.triangle-marker-bottom {\n        opacity: 0%;\n}\n\n.show-on-control-hover {\n    opacity: 0%;\n    transition: opacity var(--opacity-transition-time);\n}\n\n:host(:hover) .show-on-control-hover,\n:host(.linger) .show-on-control-hover,\n:host(.revealed-following-touch) .show-on-control-hover,\n:host(.active-gesture) .show-on-control-hover,\n:host(.open-dialog) .show-on-control-hover {\n    opacity: 100%;\n}\n\ndialog {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n\n    position: absolute;\n    left: 0;\n    top: calc(100% + 20px);\n    z-index: 90000000000;\n}\n\n.dialog-row {\n    display: flex;\n    flex-direction: row;\n}\n\n.swatch {\n    background-color: #ff0000;\n\n    flex-grow: 1;\n    border-radius: 4px;\n}\n\n.IroHandle:not(.IroHandle--isActive) {\n    opacity: 50%;\n}",this.shadowRoot.append(e),this.#b=document.createElement("canvas"),this.shadowRoot.append(this.#b),this.#y=document.createElement("div"),this.#y.classList.add("rail"),this.shadowRoot.append(this.#y);const t=document.createElement("div");t.classList.add("rail-guide","show-on-control-hover"),this.#y.appendChild(t),this.#g=document.createElement("div"),this.#g.classList.add("slider-container"),this.shadowRoot.appendChild(this.#g);for(let e of this.querySelectorAll("gradient-stop")){if(!e.hasAttribute("offset")||!e.hasAttribute("color"))continue;const t=parseFloat(e.getAttribute("offset"));if(Number.isNaN(t))continue;const n=e.getAttribute("color");n.match(/#[0-9a-zA-Z]{6}/)&&this.addRailSlider(t,n)}this.#y.addEventListener("mousedown",(e=>{e.preventDefault(),e.stopPropagation();const t=this.#g.clientWidth,n=[0,e.clientX-this.#g.getBoundingClientRect().left,t].sort(((e,t)=>e-t))[1];this._handleSliderCreation(n/t,n,{x:e.clientX,y:e.clientY})})),this.#y.addEventListener("touchstart",(e=>{e.preventDefault(),e.stopPropagation();const t=this.#g.clientWidth;for(let n of e.changedTouches){const e=[0,n.clientX-this.#g.getBoundingClientRect().left,t].sort(((e,t)=>e-t))[1];this._handleSliderCreation(e/t,e,{x:n.clientX,y:n.clientY},n.identifier)}}),{passive:!1}),this.#g.addEventListener("press-start",(e=>{this.#x&&(this.#w.unmarkAsSelected(),this.#w=e.detail.controller,this.#w.markAsSelected(),this.#x.setSelectedIndex(this.#C.indexOf(this.#w)))})),this.#g.addEventListener("press-finish",(e=>{e.detail.fromTouch&&this._linger(3e3)})),this.#g.addEventListener("press-finish-without-input",(e=>{this.#x||(console.assert(!this.#w),this.#w=e.detail.controller,this.#w.markAsSelected(),this.classList.add("open-dialog"),this.#x=new o(this.shadowRoot,this.#C.map((e=>e.colorValue)),this.#C.indexOf(this.#w)),this.#x.addEventListener("color-input",(e=>{this.#w.updateColor(e.detail.newValue)})),this.#x.addEventListener("selection-changed",(e=>{this.#w.unmarkAsSelected(),this.#w=this.#C[e.detail.selectedIndex],this.#w.markAsSelected()})),this.#x.addEventListener("dismiss",(()=>{this.classList.remove("open-dialog"),this.#w.unmarkAsSelected(),this.#w=null,this.#x=null})),this.#x.addEventListener("delete",(()=>{this.#w.delete(),this.#x.close()})))})),this.addEventListener("mouseleave",(()=>{this._linger(1e3)})),this._waitForTouch(),setTimeout((()=>{this._notifyAndUpdate()}),0)}#S=[];#C=[];addRailSlider(e,t,n=!1){const i={offset:e,color:t};this.#S.push(i);const r=new a(i,this.#g,this.shadowRoot.host,n);return r.addUpdateHandler((()=>{this._notifyAndUpdate()})),r.addDeleteHandler((e=>{this.#S.splice(this.#S.indexOf(e),1),this._notifyAndUpdate()})),this.#C.push(r),this.#x&&this.#x.addColor(i.color),r}colorAtOffset(e){const t=[0,Math.round(e*this.#b.width),this.#b.width].sort(((e,t)=>e-t))[1],n=this.#b.getContext("2d").getImageData(0,0,this.#b.width,this.#b.height);return`#${Array.from(n.data.slice(4*t,4*t+3)).map((e=>e.toString(16).padStart(2,"0"))).join("")}`}updateGradient(){this.#b.width=1024,this.#b.height=1;const e=this.#b.getContext("2d"),t=e.createLinearGradient(0,0,1023,1);for(stop of this.#S)t.addColorStop(stop.offset,stop.color);e.fillStyle=t,e.fillRect(0,0,1024,1)}get valueAsImageData(){return this.#b.getContext("2d").getImageData(0,0,this.#b.width,this.#b.height)}_linger(e){let t;new Promise((n=>{this.classList.add("linger");const i=setTimeout((()=>{n()}),e);t=()=>{clearTimeout(i),n()},t=this.addEventListener("mouseenter",t)})).then((()=>{this.removeEventListener("mouseenter",t),this.classList.remove("linger")}))}_waitForTouch(){this.classList.remove("revealed-following-touch"),this.addEventListener("touchstart",(e=>{e.preventDefault(),e.stopPropagation(),this._handleTouch()}),{once:!0})}_handleTouch(){let e;new Promise(((t,n)=>{this.classList.add("revealed-following-touch");const i=setTimeout((()=>{t()}),3e3);e=()=>{clearTimeout(i),n()},this.addEventListener("touchstart",e)})).then((()=>{this._waitForTouch()})).catch((()=>{this._handleTouch()})).finally((()=>{this.removeEventListener("touchstart",e)}))}_handleSliderCreation(e,t,n,i=null){this.addRailSlider(e,this.colorAtOffset(e),!0).handleSlideGestureFromCreation(t,n,i)}_notifyAndUpdate(){this.dispatchEvent(new Event("input",{cancelable:!0,composed:!0,bubbles:!0}))&&window.requestAnimationFrame((()=>{this.updateGradient()}))}}customElements.define("gradient-designer",l);class d extends HTMLElement{constructor(){super()}}customElements.define("gradient-stop",d);const h=JSON.parse(document.getElementById("word-list").innerText),c=["so fractal much plasma wow","all your plasma are belong to us","i can has plasma fractal","yo dawg i heard you like self similarity","bite my shiny metal fractal","heres my number plasma maybe"];function u(e){e=e.toLowerCase();let t=1;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i>="a".charCodeAt(0)&&i<="z".charCodeAt(0)?t=36*t+(i-"a".charCodeAt(0)):i>="0".charCodeAt(0)&&i<="9".charCodeAt(0)&&(t=36*t+(26+i-"0".charCodeAt(0))),t&=4294967295}return t}function g(e){return e.match(/^\s*0x[0-9a-fA-F]{8}\s*$/)?parseInt(e):u(e)}function p(){return Math.random()<.95?Array.from({length:4},(()=>h[Math.floor(h.length*Math.random())])).join(" "):c[Math.floor(c.length*Math.random())]}for(let e of document.querySelectorAll("[data-target-fractal][data-action='apply-seed'][data-source]")){const t=document.getElementById(e.dataset.targetFractal),n=document.getElementById(e.dataset.source);t&&n&&(e.addEventListener("click",(()=>{t.setAttribute("seed",g(n.value)),t.drawPlasmaInAnimationFrame()})),""===n.value&&(n.value=p()),t.setAttribute("seed",g(n.value)),n.addEventListener("keypress",(t=>{"Enter"===t.key&&e.click()})))}for(let e of document.querySelectorAll("[data-target-fractal][data-action='randomize-seed']")){const t=document.getElementById(e.dataset.targetFractal),n=document.getElementById(e.dataset.sink);t&&e.addEventListener("click",(()=>{const e=p();n&&(n.value=e),t.setAttribute("seed",u(e)),t.drawPlasmaInAnimationFrame()}))}for(let e of document.querySelectorAll("input[data-target-fractal][data-target-variable]")){const t=document.getElementById(e.dataset.targetFractal);t&&e.addEventListener("input",(n=>{t.setAttribute(e.dataset.targetVariable,n.target.value),t.drawPlasmaInAnimationFrame()}));for(let t of document.querySelectorAll(`output[for=${CSS.escape(e.getAttribute("name"))}]`))e.addEventListener("input",(e=>{t.innerText=e.target.value})),t.innerText=e.value}for(let e of document.querySelectorAll("interactive-plasma-fractal[gradient-source]")){let t=document.getElementById(e.getAttribute("gradient-source"));t&&t.addEventListener("input",(t=>{t.preventDefault(),window.requestAnimationFrame((()=>{t.target.updateGradient(),e.setAttribute("gradient-source",t.target.id),e.drawPlasma()}))}))}}();
